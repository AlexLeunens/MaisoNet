<!DOCTYPE HTML>
<html>
<head>
  <style>
    body {background: url("papier.jpg") no-repeat center center fixed;
        background-repeat: no-repeat;
        background-size: cover;
        background-attachment: fixed;
    }
    .erreur {color: #FF0000;
      position:relative;
      top:30px;
    }
    .aligner{position:relative;
      top:30px;
    }
    .ligne{position:relative;
      top:30px;
    }
    #logo1 {
    	position:fixed;
    	top: 0px;
    	right:0px;
    	background: url() 0 0;
    }
    div.static {
    position: fixed;
    top:50px;
    left:375px;
    color :#f84110;
  }
</style>
</head>

<body>
	<img id="logo1" src="Images/logo_provisoire_mini.png" ></img>  
 <?php

    $nom = "";
    $email = "";
    $genre = "";
    $commentaire = ""
    $website = "";

    $nomErreur = "";
    $emailErreur = "" ;
    $genreErreur = "";
    $siteErreur = "";
  
  if ($_SERVER["REQUEST_METHOD"] == "POST") {                                     //Vérifie que le serveur demande des données (POST)

    if (empty($_POST["nom"])) {                                                  //Cas où la case nom n'est pas remplie
      $nomErreur = "Le nom est obligatoire";
    } else {
      $nom = test_input($_POST["nom"]);                                          

      if (!preg_match("/^[a-zA-Z ]*$ /",$nom)) {                                  // Vérifier que le nom ne comporte que des lettres et des espaces
        $nomErreur = "Seulement des lettres et des espaces sont acceptés";
      }
    }
    
    if (empty($_POST["email"])) {
      $emailErreur = "Le mail est obligatoire";
    } else {

      $email = test_input($_POST["email"]);                                      

      if (!filter_var($email, FILTER_VALIDATE_EMAIL)) {                           // Vérifier que le format mail est valide
        $emailErreur = "Le format mail est invalide";
      }
    }
      
    if (empty($_POST[ "website"])) {
      $website = "";
    } else {
      $website = test_input($_POST[ "website" ]);
      // Vérifier que la syntaxe URL est valide
      if (!preg_match("/\b(?:(?:https?|ftp):\/\/|www\.)[-a-z0-9+&@#\/%?=~_|!:,.;]*[-a-z0-9+&@#\/%=~_|]/i" ,$website )) {
        $websiteErreur = "URL invalide";
      }
    }
  
    if (empty($_POST[ "commentaire" ])) {
      $commentaire = "";
    } else {
      $commentaire = test_input($_POST[ "commentaire" ]);
    }
  
    if (empty($_POST[ "genre" ])) {
      $genreErreur = "Le genre est obligatoire";
    } else {
      $genre = test_input($_POST[ "genre" ]);
    }
  
  function test_input($data) {
    $data = trim($data);
    $data = stripslashes($data);
    $data = htmlspecialchars($data);
    return $data;
  }
  ?>
  <form method="post" action="Bienvenue.php" > 

    <h1><div class="static"><i><u>Dossier d'inscription MaisoNET</u></i></div></h1>
    <p><span class="erreur">* Zone obligatoire</span></p> 

    <div class="aligner">Nom: </div><input class="ligne" type="text" name="nom" >
    <span class="erreur"> * <?php echo $nomErreur;?></span>
    <br><br>

    <div class="aligner">Adresse: </div><input class="ligne" type="text" name="adresse" >
    <span class="erreur">*</span>
    <br><br>

    <div class="aligner">Date de Naissance: </div><input class="ligne" type="text" name="DateNaissance" >
    <span class="erreur">*</span>
    <br><br>

    <div class="aligner">Pays: </div><input class="ligne" type="text" name="Pays" >
    <span class="erreur">*</span>
    <br><br>

    <div class="aligner">Code Postal: </div><input class="ligne" type="text" name="CodePostal" >
    <span class="erreur">*</span>
    <br><br>

    <div class="aligner">E-mail: </div> <input class="ligne" type="text" name="E-mail">
    <span class="erreur">*<?php echo $emailErreur;?></span>
    <br><br>

    <div class="aligner">Site Web: </div> <input class="ligne" type="text" name="site web">
    <span class="erreur"><?php echo $websiteErreur;?></span>
    <br><br>

    <div class="aligner">Commentaire: </div> <textarea class="ligne" name="commentaire" rows="5" cols="40"></textarea>
    <br><br>

    <div class="aligner"><u>Genre: </u></div>
    <br><br>
    
    Femme <input type="radio" name="genre" value="Femme" > 
    <?php if (isset($genre) && $genre=="femme" ) echo "vérifié" ;?> 
   
    Homme<input type="radio" name="genre" value="Homme"> 
    <?php if (isset($genre) && $genre=="homme" ) echo "vérifié" ;?>

    Autre <input type="radio" name="genre" value="Autre"> 
    <?php if (isset($genre) && $genre=="autre" ) echo "vérifié" ;?>
    <br><br>

    <input class="ligne" type="submit" name="Envoyer" value="Envoyer">

  </form>
  </body>

</html>
